# Промпты для LLM
prompts:

  # Генерация гипотез
  hypothesis_generation:
    system: |
      Ты - опытный аналитик данных с 10-летним стажем.
      Твоя задача - находить интересные и проверяемые закономерности в данных.
      Будь критичным и предлагай только статистически обоснованные гипотезы.

    user_template: |
      Проанализируй этот датасет и предложи содержательные исследовательские гипотезы:
      
      Название датасета: {dataset_name}
      Описание: {dataset_description}
      
      Столбцы и их типы:
      {columns_summary}
      
      Статистика по числовым столбцам:
      {numeric_stats}
      
      Распределение категориальных признаков:
      {categorical_stats}
      
      Сгенерируй {num_hypotheses} гипотез в формате JSON:
      {{
        "hypotheses": [
          {{
            "id": 1,
            "text": "формулировка гипотезы",
            "type": "тип_гипотезы",
            "columns": ["столбец1", "столбец2"],
            "reasoning": "обоснование почему эта гипотеза интересна",
            "expected_method": "ожидаемый метод проверки"
          }}
        ]
      }}
      
      Типы гипотез: correlation, mean_difference, distribution, trend, association

  # Выбор метода анализа
  method_selection:
    system: |
      Ты - эксперт по статистике. Тебе нужно выбрать наиболее подходящий
      статистический метод для проверки гипотезы.

    user_template: |
      Гипотеза: {hypothesis}
      
      Характеристики данных:
      - Типы переменных: {variable_types}
      - Размер выборки: {sample_size}
      - Распределение: {distribution_info}
      - Пропущенные значения: {missing_info}
      
      Предложи 3 наиболее подходящих метода в порядке предпочтения.
      Для каждого метода укажи:
      1. Название метода
      2. Обоснование выбора
      3. Предположения метода
      4. Ограничения
      
      Формат ответа: JSON

  # Интерпретация результатов
  interpretation:
    system: |
      Ты - опытный исследователь, который объясняет статистические результаты
      понятным языком для не-статистов.

    user_template: |
      Результаты статистического анализа:
      
      Гипотеза: {hypothesis}
      Метод: {method}
      P-value: {p_value}
      Статистика теста: {test_statistic}
      Эффект: {effect_size}
      Доверительный интервал: {confidence_interval}
      
      Напиши вывод, включающий:
      1. Основной вывод (подтверждена/отклонена гипотеза)
      2. Практическая значимость
      3. Ограничения анализа
      4. Рекомендации для дальнейшего исследования
      
      Будь точным, но избегай излишнего жаргона.

  # Проверка качества (QA Inspector)
  quality_inspection:
    system: |
      Ты - строгий рецензент научных исследований. Твоя задача - находить
      методологические ошибки и проблемы в анализе данных.

    user_template: |
      Проверь эту гипотезу и метод анализа на качество:
      
      Гипотеза: {hypothesis}
      Метод: {method}
      Данные: {data_summary}
      
      Оцени по 5 критериям (по шкале 1-10):
      1. Научная обоснованность гипотезы
      2. Корректность выбора метода
      3. Адекватность размера выборки
      4. Контроль смещающих факторов
      5. Интерпретируемость результатов
      
      Выяви 3 главные проблемы и предложи как их исправить.
      
      Формат ответа: JSON

  # Доработка гипотез (Refiner)
  refinement:
    system: |
      Ты - научный консультант, который помогает улучшить исследовательские гипотезы.
      Твоя цель - сделать гипотезы более проверяемыми, точными и значимыми.

    user_template: |
      Оригинальная гипотеза: {original_hypothesis}
      
      Критика и проблемы:
      {critique}
      
      Переформулируй гипотезу, чтобы:
      1. Исправить методологические ошибки
      2. Сделать более конкретной
      3. Улучшить проверяемость
      4. Учесть контекст данных: {data_context}
      
      Предложи 3 улучшенные версии гипотезы.

# Настройки промптов
settings:
  temperature: 0.7
  max_tokens: 2000
  response_format: "json"
  cache_enabled: true
  cache_ttl: 3600  # 1 час